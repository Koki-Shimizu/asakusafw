========================
開発環境構築ユーザガイド
========================
この文書では、Asakusa Frameworkの開発環境を構築する上での注意点を説明します。

スタンドアロンモード/疑似分散モードの切替
=========================================
開発環境では通常はHadoopのスタンドアロンモードを使用して開発しますが、
疑似分散モード上でAsakusaのアプリケーションを動作させることも可能です。

スタンドアロンモードから疑似分散モードへ切り替えるには、以下の手順に従います。

Hadoopのモードを切り替える
--------------------------
Hadoopを疑似分散モードへ切り替えます。疑似分散モードの設定方法やモードの切替手順については、各Hadoopディストリビューションのドキュメントを参照してください [#]_ 。

..  [#] 例えばCDH3では次のドキュメントなどを参照してください。

    https://ccp.cloudera.com/display/CDHDOC/CDH3+Deployment+in+Pseudo-Distributed+Mode

.. _development-environment-with-other-cdh:

CDH3以外のHadoopを使ったアプリケーションの開発環境構築
======================================================
Asakusa Framework バージョン |version| では、開発環境に使用するHadoopディストリビューションはCDH3を推奨しています。CDH3以外のHadoopディストリビューションでは、Asakusa Frameworkの動作検証は十分に行われていません。

ここでは、開発環境にCDH3以外のHadoopディストリビューションを使う上でこれまでに判明している注意点や制約について説明します。

テストドライバの実行
--------------------
テストドライバはアプリケーション開発環境で実行するため、テストドライバの実行時クラスパスは Maven, もしくは Eclipse の設定に従って参照されます [#]_ 。また、テストドライバは内部でHadoopのAPIを使用してHadoopファイルシステムに対するファイル操作を行っています。この2点から、環境によっては以下のような問題が発生することがあります。

..  [#] Asakusa Frameworkのバッチアプリケーション用アーキタイプでは、クラスパスの設定は ``pom.xml`` の設定に従って参照されます。また使用しているHadoopライブラリのバージョンは、 ``pom.xml`` のプロパティ ``hadoop.version`` に設定されています。

Hadoopファイルシステム操作用のライブラリの参照
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Hadoopディストリビューションが使用するHadoopファイルシステムによっては、これを操作するために追加のライブラリが必要になることがあります [#]_ 。テストドライバの実行環境に対して、追加のライブラリ参照を行うための設定が必要になることがあります。

..  [#] 例えば、Mapが提供するMapRFSを操作するためには、MapRFS操作用のライブラリが必要となります。

擬似分散モード環境におけるテストドライバの実行
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
擬似分散モード環境下でテストドライバを実行する場合、テストドライバが参照するHadoopファイルシステム操作用のライブラリと開発環境に導入されているHadoopのバージョンが一致していない場合、ファイルシステムのプロトコルバージョンの相違によりエラーとなる可能性があります。

スタンドアロンモードのパフォーマンス
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Asakusa Framework バージョン |version| が動作検証を行っているHadoopディストリビューション [#]_ では、CDH3と比べてApache Hadoopはスタンドアロンモードの実行が遅いことが確認されています。テストドライバ経由で大量にHadoopジョブを実行する環境では、このパフォーマンスの差異を考慮する必要があるかもしれません。

..  [#] 動作検証プラットフォームについては、 :doc:`../product/target-platform` を参照


